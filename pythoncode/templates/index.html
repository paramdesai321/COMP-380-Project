<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Chat App</title>
    <style>
        /* CSS styles remain unchanged */
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
</head>

<body>
    <div id="container">
        <h2>Chat App</h2>
        <div id="messages"></div>
    </div>

    <script>
        $(document).ready(function () {
            var socket = io.connect("http://192.168.1.250:5000");

            // Function to prompt for username and message
            function getUsernameAndMessage() {
                var username = prompt("Enter your username:");
                var message = prompt("Enter your message:");
                if (username && message) {
                    var userMessage = { username: username.trim(), message: message.trim() };
                    $('#messages').append('<p><strong>' + userMessage.username + ':</strong> ' + userMessage.message + '</p>');
                    return userMessage;
                } else {
                    alert('Username and message cannot be empty.');
                    return null;
                }
            }

            // Function to prompt for room name
            function getRoom() {
                var room = prompt("Enter the room name:");
                if (room) {
                    $('#messages').append('<p><em>Joining room:</em> ' + room + '</p>');
                    return room.trim();
                } else {
                    alert('Room name cannot be empty.');
                    return null;
                }
            }

            // Function to prompt for message in a specific room
            function getMessageInRoom(room) {
                var message = prompt("Enter your message in room '" + room + "':");
                if (message) {
                    $('#messages').append('<p><em>In room ' + room + ':</em> ' + message + '</p>');
                    return message.trim();
                } else {
                    alert('Message cannot be empty.');
                    return null;
                }
            }

            // Prompt for username and message
            var userMessage = getUsernameAndMessage();
            if (userMessage) {
                var room = getRoom();
                if (room) {
                    var messageInRoom = getMessageInRoom(room);
                    if (messageInRoom) {
                        socket.emit('chatMessage', { username: userMessage.username, room: room, message: messageInRoom });
                    }
                }
            }
        });
    </script>
</body>

</html>
